import{a as w}from"./chunk-FUHFE2NQ.js";import{a as D}from"./chunk-TQ6VO7WL.js";import{aa as K,b as F,c as $,f as I,i as y,k as u,m as z,n as d,o as N,r as _,t as H,u as R,v as M,x as E,z as f}from"./chunk-TA5YT7CS.js";import{la as h,n as J,p as S,pa as T}from"./chunk-YACY2H2X.js";import{Ab as v,Bb as g,Cb as q,Eb as U,Fb as k,Gb as p,Hb as n,Ib as i,Jb as s,Rb as C,Sb as b,Y as V,_a as a,db as l,ec as m,fc as x,gc as L,kb as c,lc as P}from"./chunk-5GIP44J6.js";var A=class o{constructor(t,e,r,j){this.fb=t;this.accountService=e;this.router=r;this.activatedRoute=j;let O=this.activatedRoute.snapshot.queryParams.returnUrl;O&&(this.returnUrl=O)}loginForm;returnUrl="/shop";ngOnInit(){this.loginForm=this.fb.group({email:[""],password:[""]})}onSubmit(){this.accountService.login(this.loginForm.value).pipe(V(()=>this.accountService.getUserInfo())).subscribe({next:()=>this.router.navigateByUrl(this.returnUrl),error:t=>console.log(t)})}static \u0275fac=function(e){return new(e||o)(l(E),l(T),l(S),l(J))};static \u0275cmp=c({type:o,selectors:[["app-login"]],decls:15,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","name@example.com","matInput",""],["formControlName","password","type","password","placeholder","Password","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"]],template:function(e,r){e&1&&(n(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return r.onSubmit()}),n(2,"div",2)(3,"h1",3),m(4,"Login"),i()(),n(5,"mat-form-field",4)(6,"mat-label"),m(7,"Email address"),i(),s(8,"input",5),i(),n(9,"mat-form-field",4)(10,"mat-label"),m(11,"Password"),i(),s(12,"input",6),i(),n(13,"button",7),m(14,"Sign in"),i()()()),e&2&&(a(),p("formGroup",r.loginForm))},dependencies:[f,_,y,d,N,R,M,D,I,w,F,h],encapsulation:2})};function ee(o,t){if(o&1&&(n(0,"mat-error"),m(1),i()),o&2){let e=b();a(),L("",e.label," is required")}}function te(o,t){if(o&1&&(n(0,"mat-error"),m(1),i()),o&2){let e=b();a(),L("",e.label," is invalid")}}var G=class o{constructor(t){this.controlDir=t;this.controlDir.valueAccessor=this}label="";type="text";placeholder=null;get control(){return this.controlDir.control}writeValue(t){}registerOnChange(t){}registerOnTouched(t){}setDisabledState(t){}static \u0275fac=function(e){return new(e||o)(l(z,2))};static \u0275cmp=c({type:o,selectors:[["app-text-input"]],inputs:{label:"label",type:"type",placeholder:"placeholder"},decls:6,vars:8,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"]],template:function(e,r){e&1&&(n(0,"mat-form-field",0)(1,"mat-label"),m(2),i(),s(3,"input",1),v(4,ee,2,1,"mat-error"),v(5,te,2,1,"mat-error"),i()),e&2&&(a(2),x(r.label),a(),p("type",P(r.type))("placeholder",P(r.placeholder))("formControl",r.control),a(),g(r.control.hasError("required")?4:-1),a(),g(r.control.hasError("email")?5:-1))},dependencies:[f,y,d,H,I,w,F,$],encapsulation:2})};function oe(o,t){if(o&1&&(n(0,"li"),m(1),i()),o&2){let e=t.$implicit;a(),x(e)}}function ie(o,t){if(o&1&&(n(0,"div",8)(1,"ul",10),U(2,oe,2,1,"li",null,q),i()()),o&2){let e=b();a(2),k(e.validationErrors)}}var B=class o{constructor(t,e,r,j){this.fb=t;this.accountService=e;this.router=r;this.snackService=j}registerForm;validationErrors;ngOnInit(){this.registerForm=this.fb.group({firstName:["",u.required],lastName:["",u.required],email:["",[u.required,u.email]],password:["",[u.required]]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snackService.success("Registration successful"),this.router.navigateByUrl("/account/login")},error:t=>this.validationErrors=t})}static \u0275fac=function(e){return new(e||o)(l(E),l(T),l(S),l(K))};static \u0275cmp=c({type:o,selectors:[["app-register"]],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["formControlName","firstName","label","First name","placeholder","Jhon"],["formControlName","lastName","label","Last name","placeholder","Smith"],["formControlName","email","label","Email address","placeholder","name@example.com"],["formControlName","password","label","Password","type","password","placeholder","Password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(e,r){e&1&&(n(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return r.onSubmit()}),n(2,"div",2)(3,"h1",3),m(4,"Register"),i()(),s(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),v(9,ie,4,0,"div",8),n(10,"button",9),m(11,"Register"),i()()()),e&2&&(a(),p("formGroup",r.registerForm),a(8),g(r.validationErrors?9:-1),a(),p("disabled",r.registerForm.invalid))},dependencies:[f,_,d,N,R,M,D,h,G],encapsulation:2})};var we=[{path:"login",component:A},{path:"register",component:B}];export{we as accountRoutes};
