import{a as g,b as V,c as q}from"./chunk-CHG4SGOE.js";import{a as N,d as L}from"./chunk-2J6MGJIE.js";import{a as z}from"./chunk-AL5BWFHJ.js";import{a as E}from"./chunk-KAGOMAVW.js";import{g as S,h as y,ma as U,p as P,qa as $,r as j,s as F}from"./chunk-F3T4JLSM.js";import{$b as k,Ib as A,Lb as x,Mb as v,Nb as e,Ob as t,Pb as R,Tb as B,Xb as T,Yb as h,ac as M,db as D,fb as d,ic as r,jc as a,kb as s,kc as c,qa as C,ra as _,rb as u,tc as m,uc as l,vc as f,wb as w}from"./chunk-RCVRDAM3.js";var K=(o,n)=>n.itemOrdered.productId;function Q(o,n){if(o&1&&(e(0,"tr")(1,"td",22)(2,"div",23),R(3,"img",24),e(4,"span"),r(5),t()()(),e(6,"td",25),r(7),t(),e(8,"td",26),r(9),m(10,"currency"),t()()),o&2){let i=n.$implicit;d(3),k("src",i.itemOrdered.pictureUrl,D),d(2),a(i.itemOrdered.productName),d(2),c("x",i.quantity,""),d(2),a(l(10,4,i.price))}}function W(o,n){if(o&1){let i=B();e(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),r(4),t(),e(5,"button",4),T("click",function(){C(i);let I=h();return _(I.onReturnClick())}),r(6),t()(),e(7,"div",5)(8,"div",6)(9,"h4",7),r(10,"Billing and delivery information"),t(),e(11,"dl")(12,"dt",8),r(13,"Shipping address"),t(),e(14,"dd",9),r(15),m(16,"address"),t()(),e(17,"dl")(18,"dt",8),r(19,"Payment info"),t(),e(20,"dd",9),r(21),m(22,"paymentCard"),t()()(),e(23,"div",6)(24,"h4",7),r(25,"Order details"),t(),e(26,"dl")(27,"dt",8),r(28,"Email address"),t(),e(29,"dd",9),r(30),t()(),e(31,"dl")(32,"dt",8),r(33,"Order status"),t(),e(34,"dd",9),r(35),t()(),e(36,"dl")(37,"dt",8),r(38,"Order date"),t(),e(39,"dd",9),r(40),m(41,"date"),t()()()(),e(42,"div",10)(43,"div",11)(44,"table",12)(45,"tbody",13),x(46,Q,11,6,"tr",null,K),t()()()(),e(48,"div",14)(49,"p",15),r(50,"Order summary"),t(),e(51,"div",16)(52,"div",6)(53,"dl",17)(54,"dt",18),r(55,"Subtotal"),t(),e(56,"dd",19),r(57),m(58,"currency"),t()(),e(59,"dl",17)(60,"dt",18),r(61,"Discount"),t(),e(62,"dd",20),r(63),m(64,"currency"),t()(),e(65,"dl",17)(66,"dt",18),r(67,"Delivery fee"),t(),e(68,"dd",19),r(69),m(70,"currency"),t()()(),e(71,"dl",21)(72,"dt",18),r(73,"Total"),t(),e(74,"dd",19),r(75),m(76,"currency"),t()()()()()()}if(o&2){let i=h();d(4),c("Order summary for order #",i.order.id,""),d(2),a(i.buttonText),d(9),a(l(16,11,i.order.shippingAddress)),d(6),a(l(22,13,i.order.paymentSummary)),d(9),a(i.order.buyerEmail),d(5),a(i.order.statusString),d(5),a(f(41,15,i.order.orderDate,"medium")),d(6),v(i.order.orderItems),d(11),c(" ",l(58,18,i.order.subtotal)," "),d(6),c(" -",l(64,20,i.order.discount)," "),d(6),c(" ",l(70,22,i.order.deliveryMethod.price)," "),d(6),c(" ",l(76,24,i.order.total)," ")}}var O=class o{constructor(n,i,p,I,Z){this.orderService=n;this.activatedRoute=i;this.router=p;this.accountService=I;this.adminService=Z}order;buttonText="";ngOnInit(){this.buttonText=this.accountService.isAdmin()?"Return to Admin":"Return to orders",this.loadOrder()}loadOrder(){let n=this.activatedRoute.snapshot.paramMap.get("id");n&&(this.accountService.isAdmin()?this.adminService.getOrder(n):this.orderService.getOrderForUser(n)).subscribe({next:p=>this.order=p,error:p=>console.log(p)})}onReturnClick(){this.accountService.isAdmin()?this.router.navigateByUrl("/admin"):this.router.navigateByUrl("/orders")}static \u0275fac=function(i){return new(i||o)(s(g),s(P),s(j),s($),s(z))};static \u0275cmp=u({type:o,selectors:[["app-order-details"]],decls:1,vars:1,consts:[[1,"bg-white","py-8","shadow-md","max-w-screen-lg","mx-auto"],[1,"px-4","w-full"],[1,"flex","justify-between","items-center","align-middle"],[1,"text-2xl","text-center","font-semibold"],["mat-stroked-button","",3,"click"],[1,"mt-8","py-3","border-t","border-gray-200","flex","gap-16"],[1,"space-y-2"],[1,"text-lg","font-semibold"],[1,"font-medium"],[1,"mt-1","font-light"],[1,"mt-4"],[1,"border-y","border-gray-200"],[1,"w-full","text-center"],[1,"divide-y","divide-gray-200"],[1,"space-y-4","rounded-lg","border-y","border-gray-200","p-4","bg-white"],[1,"text-xl","font-semibold"],[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-4"],[1,"font-medium","text-gray-500"],[1,"font-medium","text-gray-900"],[1,"font-medium","text-green-500"],[1,"flex","items-center","justify-between","gap-4","border-t","border-gray-200","pt-2"],[1,"py-4"],[1,"flex","items-center","gap-4"],["alt","product image",1,"w-10","h-10",3,"src"],[1,"p-4"],[1,"p-4","text-right"]],template:function(i,p){i&1&&w(0,W,77,26,"mat-card",0),i&2&&A(p.order?0:-1)},dependencies:[L,N,U,V,q,S,y],encapsulation:2})};var X=(o,n)=>n.id;function Y(o,n){if(o&1&&(e(0,"tr",10)(1,"th",11),r(2),t(),e(3,"td"),r(4),m(5,"date"),t(),e(6,"td"),r(7),m(8,"currency"),t(),e(9,"td"),r(10),t()()),o&2){let i=n.$implicit;M("routerLink","/orders/",i.id,""),d(2),c("# ",i.id,""),d(2),a(f(5,6,i.orderDate,"medium")),d(3),a(l(8,9,i.total)),d(3),a(i.statusString)}}var b=class o{constructor(n){this.orderService=n}orders=[];ngOnInit(){this.orderService.getOrdersForUser().subscribe({next:n=>{this.orders=n,console.log(n)},error:n=>console.log(n)})}static \u0275fac=function(i){return new(i||o)(s(g))};static \u0275cmp=u({type:o,selectors:[["app-order"]],decls:19,vars:0,consts:[[1,"mx-auto","mt-32"],[1,"font-semibold","text-2xl","mb-6","text-center"],[1,"flex","flex-col"],[1,"w-full"],[1,"min-w-full","divide-y","divide-gray-200","cursor-pointer"],[1,"bg-gray-50"],[1,"uppercase","text-gray-600","text-sm"],[1,"text-center","px-6","py-3"],[1,"text-left"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-100",3,"routerLink"],[1,"px-6","py-3"]],template:function(i,p){i&1&&(e(0,"div",0)(1,"h2",1),r(2,"My orders"),t(),e(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead",5)(7,"tr",6)(8,"th",7),r(9,"Order"),t(),e(10,"th",8),r(11,"Date"),t(),e(12,"th",8),r(13,"Total"),t(),e(14,"th",8),r(15,"Status"),t()()(),e(16,"tbody",9),x(17,Y,11,11,"tr",10,X),t()()()()()),i&2&&(d(17),v(p.orders))},dependencies:[F,y,S],encapsulation:2})};var fe=[{path:"",component:b,canActivate:[E]},{path:":id",component:O,canActivate:[E]}];export{fe as orderRoutes};
